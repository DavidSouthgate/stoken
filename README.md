stoken - Software Token for Linux/UNIX
======================================

stoken is a tokencode generator compatible with RSA SecurID 128-bit (AES)
tokens.  The project includes several components:

 * A simple command line interface (CLI) used to manage and manipulate tokens
 * A GTK+ GUI with cut&amp;paste functionality
 * A shared library allowing other software to generate tokencodes on demand

 This **fork** primarily targets changing the build system to use CMake and including dependency sources as submodules to
 allow for builds targetting any platform.

## Building

### Submodules
The project must be cloned with submodules.

To clone with submodules:
```
git clone --recurse-submodules -j8 git@github.com:DavidSouthgate/stoken.git
```

To initialise submodules if not done so when cloned:
```
git submodule update --init --recursive
```
### Dependencies

 * libtomcrypt & libtommath (included as submodules)
 * libxml2
 * libgtk3.0 (required for stoken-gui only)

The following are also required for building:

 * cmake
 * make

### Compile instructions

To build CLI:
```
cmake .
make
```

To build as library:
```
cmake -DLIBSTOKEN=1 -DCLISTOKEN=0 .
make
```

## Usage

First, import a token from a raw string or an "sdtid" XML file:

    stoken import --token 2000123456...
    stoken import --token com.rsa.securid.iphone://ctf?ctfData=2000123456...
    stoken import --file mytoken.sdtid

This will prompt for an optional password, so that your seed is encrypted
on disk.

Next, use the CLI or GUI to show the current tokencode:

    stoken tokencode
    stoken-gui &

If your token requires a PIN, stoken will prompt for it. You can use
<code>stoken setpin</code> to cache your PIN in <code>~/.stokenrc</code>.
This is much less secure, but may be useful for automation.

Modern versions of OpenConnect link against libstoken and can send an
autogenerated tokencode as the password. Import your token using the
above instructions, then:

    openconnect -u USERNAME --token-mode=rsa HOSTNAME

See the man pages for additional details: stoken(1), stoken-gui(1)

See examples/ and src/stoken.h for information on using the shared library
interface (libstoken) to generate tokencodes from other applications.

## Screenshots

<table border=1 cellpadding=15>
<tr align="center">
  <td><code>stoken-gui</code>
  <td><code>stoken-gui --small</code>
<tr valign="top">
  <td><img src="misc/screenshot-0.png">
  <td><img src="misc/screenshot-1.png">
</table>

## Misc

Fork Author: David Southgate &lt;d@davidsouthgate.co.uk&gt;
Original Author: Kevin Cernekee &lt;cernekee@gmail.com&gt;

License: LGPLv2.1+

stoken is a hobbyist project, not affiliated with or endorsed by
RSA Security.
